name: Precise Error Finder

on:
  workflow_dispatch:

jobs:
  find-error:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Find exact error location
      run: |
        echo "ðŸŽ¯ ç²¾ç¡®æŸ¥æ‰¾é”™è¯¯ä½ç½®..."
        
        # å¿«é€Ÿå®‰è£…ä¾èµ–
        sudo apt update > /dev/null 2>&1
        sudo apt install -y build-essential gcc-aarch64-linux-gnu bc flex bison libelf-dev > /dev/null 2>&1
        
        export ARCH=arm64
        export CROSS_COMPILE=aarch64-linux-gnu-
        
        # é…ç½®
        make alioth_defconfig > /dev/null 2>&1
        echo "âœ… é…ç½®å®Œæˆ"
        
        # æž„å»ºå¹¶æ•èŽ·ç¬¬ä¸€ä¸ªè‡´å‘½é”™è¯¯
        echo "ðŸ” æŸ¥æ‰¾ç¬¬ä¸€ä¸ªè‡´å‘½é”™è¯¯..."
        make -j1 2>&1 | grep -E -A5 -B5 "(error:|Error:|ERROR:|stop|Stop)" | head -20
